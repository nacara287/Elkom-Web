@model And.ElkomMuhasebe.UI.WEB.Controllers.CARI_HAREKETController.modelimiz
@{
    if (Model.fis.TIP == 1)
    {
        if (Model.fis.ID == 0)
        {
            ViewBag.Title = "Cari Tahsilat Fişi Oluştur";
            ViewBag.baslık = "Tahsilat Fişi";

        }

        else
        {
            ViewBag.baslık = "Tahsilat Fişi";
            ViewBag.Title = "Cari Tahsilat Fişi Kartı";

        }

    }
    else
    {
        if (Model.fis.ID == 0)
        {
            ViewBag.baslık = "Tediye Fişi";
            ViewBag.Title = "Cari Tediye Fişi Oluştur";

        }
        else
        {
            ViewBag.Title = "Cari Teddiye Fişi Kartı"; ViewBag.baslık = "Teddiye Fişi";
        }

    }
    Layout = "~/Views/Shared/yeni.cshtml";
}

<img id="load" style="display:none" src="@Model.firmalogo">
@Html.AntiForgeryToken()
<div class="card">
    <div class="card-body p-3">
        <div class="form-row">
            @if (Model.fis.ID == 0)
            {
                <div class="form-group col-md-3">
                    <label>Cari Bilgileri</label>
                    <select id="CariKodu" onchange="carikurgetir()" class="form-control  select2bs4" style="width: 100%;">
                        @if (!string.IsNullOrEmpty(Model.carikod))
                        {
                            <option selected value="@Model.carikod">@Model.cariad </option>
                        }

                    </select>
                </div>
                <div class="form-group col-md-2">
                    <label>Fiş Numarası</label>
                    <input id="FisNo" type="text" class="form-control form-control-sm" placeholder="Fiş Numarası" readonly required="" value="@("CARIFIS" + (Model.CARI_FIs + 1).ToString())">
                </div>
                <div class="form-group col-md-2">
                    <label>Fiş Tarihi</label>
                    <input id="Tarih" type="datetime-local" class="form-control form-control-sm" value="@DateTime.Now.Year.ToString("D" + 4)-@DateTime.Now.Month.ToString("D" + 2)-@DateTime.Now.Day.ToString("D" + 2)@Html.Raw("T")@DateTime.Now.Hour.ToString("D" + 2):@DateTime.Now.Minute.ToString("D" + 2)">
                </div>
                <div class="form-group col-md-2">
                    <label>Sorumluluk Merkezi</label>
                    <select id="Smerkezi" class="form-control form-control-sm">

                        @{ if (Model.sORUMLULUK_MERKEZIs != null)
                            {
                                foreach (var item in Model.sORUMLULUK_MERKEZIs)
                                {
                                    <option>@item.ACIKLAMA</option>
                                }
                            }
                        }
                    </select>
                </div>

            }
            else
            {
                <div class="form-group col-md-3">
                    <label>Cari Bilgileri</label>
                    <input id="CariKodu" class="form-control form-control-sm" readonly data-hiddenvalue="@Model.fis.Cari.ID" value="@Model.fis.Cari.CARIKOD/@Model.fis.Cari.FIRMAUNVANI">

                </div>
                <div class="form-group col-md-2">
                    <label>Fiş Numarası</label>
                    <input id="FisNo" type="text" class="form-control form-control-sm" readonly placeholder="Fiş Numarası" required="" value="@Model.fis.FISNO">
                </div>
                <div class="form-group col-md-2">
                    <label>Fiş Tarihi</label>
                    <input id="Tarih" type="datetime-local" class="form-control form-control-sm" value="@Model.fis.TARIH.Year.ToString("D" + 4)-@Model.fis.TARIH.Month.ToString("D" + 2)-@Model.fis.TARIH.Day.ToString("D" + 2)@Html.Raw("T")@Model.fis.TARIH.Hour.ToString("D" + 2):@Model.fis.TARIH.Minute.ToString("D" + 2)">
                </div>
                <div class="form-group col-md-2">
                    <label>Sorumluluk Merkezi</label>
                    <select id="Smerkezi" class="form-control form-control-sm">


                        @{ if (Model.sORUMLULUK_MERKEZIs != null)
                            {
                                <option>@Model.fis.SORUMLULUK_MERKEZI.ACIKLAMA</option>
                                foreach (var item in Model.sORUMLULUK_MERKEZIs)
                                {
                                    <option>@item.ACIKLAMA</option>
                                }
                            }
                        }
                    </select>
                </div>
            }

            <div class="form-group col-md-3">
                <label>Fiş Notu</label>
                <input id="Not" type="text" class="form-control form-control-sm" placeholder="Not" value="@Model.fis.NOT">
            </div>
        </div>
        <!-- Liste -->
        <div class="table-responsive" id="yazdirilcak">
            <table id="bootstrap-table" class="table table-sm">
                <thead>
                    <tr>
                        <th data-field="HAREKET" class="text-center" data-sortable="true">Hareket</th>
                        <th data-field="KASA" vertical-align="middle" data-sortable="true">Kasa</th>
                        <th data-field="PORTFÖYNO" data-sortable="true">Portföy No</th>
                        <th data-field="ACIKLAMA" data-width="200" data-sortable="true">Açıklama</th>
                        <th data-field="VADE">Vade</th>
                        <th data-field="TUTAR" data-sortable="true" data-footer-formatter="priceFormatter">Tutar</th>
                        <th data-field="PARABIRIMI" data-width="60" data-sortable="true">Para Birimi</th>
                        <th data-field="PARABIRIMI" data-sortable="true">Kur</th>
                        <th data-field="NETTUTAR" data-sortable="true" data-formatter="numberformatter">Net Tutar</th>
                        <th data-width="600" data-width-unit="px"></th>
                    </tr>
                    <tr class="no-print" id="copy">
                        <td style="width: 85px;">
                            <select class="custom-select custom-select-sm" name="Hareket" id="Hareket" onchange="ceksenetayarla()">
                                <option>Seçin</option>
                                <option value="0">Nakit</option>
                                <option value="1">Çek</option>
                                <option value="2">Senet</option>
                                <option value="3">Dekont</option>
                                <option value="4">Virman</option>
                                <option value="5">Visa</option>
                            </select>
                        </td>
                        <td style="width: 100px;">
                            <input type="text" readonly class="form-control form-control-sm " name="Kasa" id="Kasa" onclick="ceksenetayarla()" onchange="ceksenetgetir()" placeholder="KasaAdı">
                        </td>
                        <td style="width: 76px;">
                            <input type="text" class="form-control form-control-sm" name="Adı" id="Adı" placeholder="Portfoyno" readonly>
                        </td>
                        <td style="width: 220px">
                            <input type="text" class="form-control form-control-sm" placeholder="Açıklama" id="Açıklama">
                        </td>
                        <td>
                            <input type="date" class="form-control form-control-sm" name="Vade" id="Vade" value="@DateTime.Now.Year.ToString("D" + 4)-@DateTime.Now.Month.ToString("D" + 2)-@DateTime.Now.Day.ToString("D" + 2)">
                        </td>
                        <td style="width: 115px;">
                            <input type="text" class="form-control form-control-sm text-right masklancak" value="0.00" name="Tutar" id="Tutar" onchange="tutargetir()" placeholder="Tutar" required="">
                        </td>
                        <td style="width: 76px;">
                            <select class="custom-select custom-select-sm" name="ParaBirimi" id="ParaBirimi" onchange="kurgetir()">
                                @{ if (Model.KUR_BASLIKa != null)
                                    {
                                        <option value="1">TRY</option>
                                        foreach (var item in Model.KUR_BASLIKa)
                                        {
                                            <option value="@item.KUR.ToString().Replace(",",".")">@item.KURKODU</option>
                                        }
                                    }
                                }
                            </select>
                        </td>
                        <td style="width: 72px;">
                            <input type="text" name="ParaBirimiKuru" id="ParaBirimiKuru" class="form-control form-control-sm text-right" value="1.00" placeholder="Para Kuru" onchange="tutargetir()" required="">
                        </td>
                        <td style="width: 115px;">
                            <input type="text" readonly class="form-control form-control-sm text-right" name="NetTutar" id="NetTutar" placeholder="Net Tutar" aria-describedby="net-tutar">
                        </td>
                        <td class="btnekle">
                            <button type="button" id="addRowBtn" onclick="butonlistele()" class="btn btn-success btn-sm btn-rounded">
                                <span class="icon text-white-50">
                                    <i class="fas fa-plus"></i>
                                </span>
                            </button>
                        </td>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.CARI_FIS_HAREKETs)
                    {
                        <tr data-index="0">
                            <td class="hareket" style="width: 85px;"><input class="form-control form-control-sm" value="@item.HAREKET" readonly=""> </td>
                            <td style="width: 100px;">   <input type="text" readonly="" class="form-control form-control-sm" value="@item.KASA"></td>
                            <td style="width: 76px;"><input type="text" class="form-control form-control-sm" readonly="" value="@item.PORTFÖYNO"></td>
                            <td style="width: 220px"><input type="text" class="form-control form-control-sm" value="@item.ACIKLAMA"></td>
                            <td><input type="date" class="form-control form-control-sm" value="@item.VADE.Substring(0,10)"></td>
                            <td style="width: 115px;" class="fiyat"><input type="text" class="form-control form-control-sm text-right" onchange="tutargetirrowtutar(this)" value="@item.TUTAR" required=""></td>
                            <td style="width: 76px;"><input class="form-control form-control-sm" value="@item.PARABIRIMI" readonly=""></td>
                            <td style="width: 72px;" class="parabirimi"> <input type="text" class="form-control form-control-sm text-right" onchange="tutargetirrowparabirimi(this)" value="@item.PARAKURU" required=""></td>
                            <td class="countable" style="width: 115px;"><input type="text" readonly="" value="@item.NETTUTAR" class="form-control form-control-sm text-right" aria-describedby="net-tutar"></td>
                            @if (item.HAREKET != "Visa")
                            {
                                <td class="no-print"> <button type="button" id="deleteRowBtn" onclick="deleteRow(this)" class="btn btn-danger btn-sm btn-rounded noprint">  <span class="icon text-white-50">    <i class="fas fa-trash-alt"></i> </span></button></td>
                            }

                        </tr>

                    }
                </tbody>
            </table>
        </div>
    </div>
    <!-- Alt toplamlar -->
    <div class="card-footer ">
        <div class="row">
            <div class="col-md-6">
                <p>Toplam Nakit:<a id="nakitoplam"></a> </p>
                <p>Toplam Çek: <a id="cektoplam"></a></p>
                <p>Toplam Senet: <a id="senetoplam"></a></p>
            </div>
            <div class="col-md-6">
                <div class="form-group row mb-1">
                    <label for="VadeFarkı" class="col-sm-6 text-right col-form-label">Vade Farkı</label>
                    <div class="col-sm-6">
                        <input type="text" class="form-control text-right form-control-sm" placeholder="0.00" readonly>
                    </div>
                </div>
                <div class="form-group row mb-1">
                    <label for="GünündeDeğeri" class="col-sm-6  text-right col-form-label">Gününde Değeri</label>
                    <div class="col-sm-6">
                        <input type="text" class="form-control  text-right form-control-sm" placeholder="0.00" readonly>
                    </div>
                </div>
                <div class="form-group row mb-1">
                    <label for="ToplamTutar" class="col-sm-6 text-right col-form-label">Toplam Tutar</label>
                    <div class="col-sm-6">
                        <input id="toplam" type="text" class="form-control text-right form-control-sm" placeholder="0.00" readonly>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="py-2">
    <button aria-label="" class="btn btn-primary " onclick="butongonder(false,this)">
        <span class="icon text-white-50">
            <i class="fas fa-save"></i>
        </span>
        <span class="text">Kaydet</span>
    </button>
    <a aria-label="" class="btn btn-secondary " href="@Url.RequestContext.HttpContext.Request.Url.ToString()" type="reset">
        <span class="icon text-white-50">
            <i class="fas fa-power-off"></i>
        </span>
        <span class="text">İptal</span>
    </a>
    <button aria-label="" class="btn btn-primary " onclick="butongonder(true,this)" type="submit">
        <span class="icon text-white-50">
            <i class="fas fa-print"></i>
        </span>
        <span class="text">Kaydet ve Yazdır</span>
    </button>
</div>






<div class="modal fade" id="ModalKasaSec" tabindex="-2" aria-labelledby="ModalKasaSecLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ModalKasaSecLabel">Kasa Listesi</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <div class="table-responsive">
                    <table id="kasatablo" class="table-bordered table-sm" data-maintain-meta-data="true" data-maintain-selected="true" data-show-search-clear-button="true" data-advanced-search="true"
                           data-id-table="advancedTable" data-show-footer="true" data-footer-style="footerStyle"
                           data-single-select="true">
                        <thead>
                            <tr>
                                <th data-field="state" class="no-print" data-checkbox="true"></th>
                                <th data-field="KASAKODU" data-footer-formatter="idFormatter" data-sortable="true">Kasa Kodu</th>
                                <th data-field="KASAADI" data-sortable="true">Açıklama</th>
                                <th data-field="TIPI" data-sortable="true">Açıklama</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table><div id="FaturaCariSecDataTablo_processing" class="dataTables_processing panel panel-default" style="display: none;">İşleniyor...</div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-dark" data-dismiss="modal">İptal</button>
                <button type="button" class="btn btn-primary" onclick="butonkasagetir()" data-dismiss="modal">Seç</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ModalCEKGIRIS" tabindex="-3" aria-labelledby="ModalCEKGIRISLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ModalCEKGIRISLabel">Cari Çek Giriş</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <div class="form-group col-md-4">
                        <label for="Portfoyno">Portfoy No :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="Portfoyno" id="Portfoyno" placeholder="Portfoy no">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="BankaAdı">Banka Adı :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="BankaAdı" id="BankaAdı" placeholder="Banka Adı">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="BankaSube">Banka Şube :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="BankaSube" id="BankaSube" placeholder="Banka Şube">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="BankaNo">Banka Hesap No :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="BankaNo" id="BankaNo" placeholder="Banka Hesap No">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="ÇekNo">Çek No :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="ÇekNo" id="ÇekNo" placeholder="Çek No">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="KaşideEden">Kaşide Eden :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="KaşideEden" id="KaşideEden" placeholder="Kaşide Eden">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="KaşideYeri">Kaşide Yeri :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="KaşideYeri" id="KaşideYeri" placeholder="Kaşide Yeri">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="KaşideTarihi">Kaşide Tarihi :</label>
                        <div class="input-group">
                            <input type="date" class="form-control form-control-sm" name="KaşideTarihi" id="KaşideTarihi" placeholder="Kaşide Tarihi" value="@DateTime.Now.Year.ToString("D" + 4)-@DateTime.Now.Month.ToString("D" + 2)-@DateTime.Now.Day.ToString("D" + 2)">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="VergiNo">VKN/TC/Vergi Dairesi :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="VergiNo" id="VergiNo" placeholder="Vergi No">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-dark" data-dismiss="modal">İptal</button>
                <button type="button" class="btn btn-primary" onclick="butoncekekle()" data-dismiss="modal">Oluştur</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ModalSENETGIRIS" tabindex="-4" aria-labelledby="ModalSENETGIRISLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ModalSENETGIRISLabel">Cari Senet Giriş</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <div class="form-group col-md-4">
                        <label for="SenetPortfoyno">Portfoy No :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="SenetPortfoyno" id="SenetPortfoyno" placeholder="Portfoy no">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="SenetKesıdeEden">Kaşide Eden :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="SenetKesıdeEden" id="SenetKesıdeEden" placeholder="Kaşide Eden">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="SenetKesıdeTarihi">Kaşide Tarihi :</label>
                        <div class="input-group">
                            <input type="date" class="form-control form-control-sm" name="SenetKesıdeTarihi" id="SenetKesıdeTarihi" placeholder="Kaşide Tarihi" value="@DateTime.Now.Year.ToString("D" + 4)-@DateTime.Now.Month.ToString("D" + 2)-@DateTime.Now.Day.ToString("D" + 2)">
                        </div>
                    </div>
                    <div class="form-group col-md-12">
                        <label for="SenetAderes">Adres :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="SenetAderes" id="SenetAderes" placeholder="Adres">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="SenetSehir">Şehir :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="SenetSehir" id="SenetSehir" placeholder="Şehir">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="SenetVergiDairesi">Vergi Dairesi :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="SenetVergiDairesi" id="SenetVergiDairesi" placeholder="Vergi Dairesi">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="SenetVergiNO">Vergi No :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="SenetVergiNO" id="SenetVergiNO" placeholder="Vergi No">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-dark" data-dismiss="modal">İptal</button>
                <button type="button" class="btn btn-primary" onclick="butonsenetekle()" data-dismiss="modal">Oluştur</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ModalFIRMACEKGIRIS" tabindex="1" aria-labelledby="ModalFIRMACEKGIRISLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ModalFIRMACEKGIRISLabel">Firma Çeki</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <div class="form-group col-md-4">
                        <label for="FirmaPortfoyno">Portfoy No :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="FirmaPortfoyno" id="FirmaPortfoyno" placeholder="Portfoy no">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="FirmaBankaAdı">Banka Adı :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="FirmaBankaAdı" id="FirmaBankaAdı" placeholder="Banka adı">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="FirmaBankaSube">Banka Şube :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="FirmaBankaSube" id="FirmaBankaSube" placeholder="Banka şube">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="FirmaBankaNo">Banka Hesap No :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="FirmaBankaNo" id="FirmaBankaNo" placeholder="Banka hesap no">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="FirmaÇekNo">Çek No :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="FirmaÇekNo" id="FirmaÇekNo" placeholder="Çek no">
                        </div>
                    </div>
                    <div class="form-group col-md-12">
                        <label for="FirmaÇekAçıklama">Açıklama :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="FirmaÇekAçıklama" id="FirmaÇekAçıklama" placeholder="Açıklama">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-dark" data-dismiss="modal">İptal</button>
                <button type="button" class="btn btn-primary" onclick="butonfirmacekekle()" data-dismiss="modal">Oluştur</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ModalFIRMASENETGIRIS" tabindex="2" aria-labelledby="ModalFIRMASENETGIRISLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ModalFIRMASENETGIRISLabel">Firma Senet Giriş</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <div class="form-group col-md-4">
                        <label for="FirmaSenetPortfoyno">Portfoy No :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="FirmaSenetPortfoyno" id="FirmaSenetPortfoyno" placeholder="Portfoy no">
                        </div>
                    </div>
                    <div class="form-group col-md-12">
                        <label for="FirmaSenetAderes">Adres :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="FirmaSenetAderes" id="FirmaSenetAderes" placeholder="Adres">
                        </div>
                    </div>
                    <div class="form-group col-md-12">
                        <label for="FirmaSenetSehir">Şehir :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="FirmaSenetSehir" id="FirmaSenetSehir" placeholder="Şehir">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="FirmaSenetVergiDairesi">Vergi Dairesi :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="FirmaSenetVergiDairesi" id="FirmaSenetVergiDairesi" placeholder="Vergi Dairesi">
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="FirmaSenetVergiNO">Vergi No :</label>
                        <div class="input-group">
                            <input type="text" class="form-control form-control-sm" name="FirmaSenetVergiNO" id="FirmaSenetVergiNO" placeholder="Vergi No">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-dark" data-dismiss="modal">İptal</button>
                <button type="button" class="btn btn-primary" onclick="butonfirmasenetekle()" data-dismiss="modal">Oluştur</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ModalPORTFOYDAKICEKLER" tabindex="-6" aria-labelledby="ModalPORTFOYDAKICEKLERLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ModalPORTFOYDAKICEKLERLabel">Portfoydaki Çekler</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table id="cektablosu" class="table-bordered table-sm" data-show-search-clear-button="true"
                           data-show-footer="true" data-footer-style="footerStyle" data-show-print="true"
                           data-single-select="true" data-show-refresh="true" data-icon-size="sm"
                           data-side-pagination="server"
                           data-pagination="true"
                           data-page-size="10"
                           data-page-list="[10, 20, 50, 100, 200, 300]" data-show-export="true" data-reorderable-columns="true">
                        <thead>
                            <tr>

                                <th data-field="state" class="no-print" data-print-ignore="true" data-checkbox="true"></th>
                                <th data-field="ID" data-print-ignore="true" class="text-center" data-sortable="true" data-footer-formatter="idFormatter" data-visible="false">ID</th>
                                <th data-field="TARIH" data-sortable="true">Tarih</th>

                                <th data-field="PORTFOYNO" data-sortable="true">Portfoy No</th>

                                <th data-field="CEKDURUMU" data-sortable="true">Çek Durumu</th>
                                <th data-field="ALINANKISIKODU" data-sortable="true">Alınan Kişi Kodu</th>
                                <th data-field="ALINANKISIADI" data-sortable="true">Alınan Kişi Adı<a class="no-print" style="color:transparent;">-----------------------------------------</a></th>

                                <th data-field="VADE" data-sortable="true">Vade<a class="no-print" style="color:transparent;">-----------------------------------------</a></th>

                                <th data-field="ACIKLAMA" data-sortable="true">Açıklama<a class="no-print" style="color:transparent;">-----------------------------------------</a></th>
                                <th data-field="TUTAR" data-align="right" data-footer-formatter="priceFormatter" data-sortable="true" data-formatter="numberformatter">Tutar</th>

                                <th data-field="SORUMLULUK_MERKEZI" data-sortable="true">S Merkezi</th>


                            </tr>
                        </thead>

                        <tbody>
                        </tbody>

                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-dismiss="modal" data-toggle="modal" data-target="#ModalFIRMACEKGIRIS">Yeni Firma Çeki</button>
                <button type="button" class="btn btn-outline-dark" data-dismiss="modal">İptal</button>
                <button type="button" class="btn btn-primary" onclick="butoncekgetir()" data-dismiss="modal">Seç</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="ModalPORTFOYDAKISENETLER" tabindex="-6" aria-labelledby="ModalPORTFOYDAKISENETLERLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ModalPORTFOYDAKISENETLERLabel">Portfoydaki Senetler</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table id="senettablosu" class="table-bordered table-sm" data-show-search-clear-button="true"
                           data-show-footer="true" data-footer-style="footerStyle" data-show-print="true"
                           data-single-select="true" data-show-refresh="true" data-icon-size="sm"
                           data-side-pagination="server"
                           data-pagination="true"
                           data-page-size="10"
                           data-page-list="[10, 20, 50, 100, 200, 300]" data-show-export="true" data-reorderable-columns="true">
                        <thead>
                            <tr>


                                <th data-field="state" class="no-print" data-print-ignore="true" data-checkbox="true"></th>
                                <th data-field="ID" data-print-ignore="true" class="text-center" data-sortable="true" data-footer-formatter="idFormatter" data-visible="false">ID</th>
                                <th data-field="TARIH" data-sortable="true">Tarih</th>
                                <th data-field="PORTFOYNO" data-sortable="true">Portfoy No</th>

                                <th data-field="SENETDURUMU" data-sortable="true">Senet Durumu</th>
                                <th data-field="ALINANKISIADI" data-sortable="true">Alınan Kişi Adı<a class="no-print" style="color:transparent;">-----------------------------------------</a></th>
                                <th data-field="ALINANKISIKODU" data-sortable="true">Alınan Kişi Kodu</th>
                                <th data-field="ACIKLAMA" data-sortable="true">Açıklama<a class="no-print" style="color:transparent;">-----------------------------------------</a></th>
                                <th data-field="TUTAR" data-align="right" data-footer-formatter="priceFormatter" data-sortable="true" data-formatter="numberformatter">Tutar</th>
                                <th data-field="VADE" data-sortable="true">Vade<a class="no-print" style="color:transparent;">-----------------------------------------</a></th>

                               

                                <th data-field="SORUMLULUK_MERKEZI" data-sortable="true">S Merkezi</th>

                            </tr>
                        </thead>

                        <tbody>
                        </tbody>

                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-dismiss="modal" data-toggle="modal" data-target="#ModalFIRMASENETGIRIS">Yeni Firma Senedi</button>
                <button type="button" class="btn btn-outline-dark" data-dismiss="modal">İptal</button>
                <button type="button" class="btn btn-primary" onclick="butonsenetgetir()" data-dismiss="modal">Seç</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="ModalBanka" tabindex="-6" aria-labelledby="ModalBankaLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ModalBankaLabel">Bankalar</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table id="bankatable" class="table-bordered table-sm" data-show-search-clear-button="true"
                           data-show-footer="true" data-footer-style="footerStyle" data-show-print="true"
                           data-single-select="true" data-show-refresh="true" data-icon-size="sm"
                           data-side-pagination="server"
                           data-pagination="true"
                           data-page-size="10"
                           data-page-list="[10, 20, 50, 100, 200, 300]" data-show-export="true" data-reorderable-columns="true">
                        <thead>
                            <tr>
                                <th data-field="state" class="no-print" data-print-ignore="true" data-checkbox="true"></th>
                                <th data-field="ID" data-print-ignore="true" data-visible="false" class="text-center" data-sortable="true" data-footer-formatter="idFormatter">ID</th>

                                <th data-field="BANKAKODU" data-sortable="true">Banka Kodu</th>
                                <th data-field="BANKAADI" data-sortable="true">Banka Adı<a class="no-print" style="color:transparent;">-----------------------------------------</a></th>
                                <th data-field="SUBEADI">Şube Adı</th>
                                <th data-field="HESAPNO" data-align="right">Hesap No<a class="no-print" style="color:transparent;">-----------------------------------------</a></th>
                                <th data-field="MUSTERIVISA">Müşteri Visa</th>
                                <th data-field="FIRMACEK" data-align="right">Firma Çek</th>
                                <th data-field="SENETTOPLAM" class="td-actions text-right no-print" data-align="right" data-sortable="true" data-formatter="numberformatter" data-footer-formatter="priceFormatter">Senet Toplam</th>
                                <th data-field="ÇEKTOPLAM" class="td-actions text-right no-print" data-align="right" data-sortable="true" data-formatter="numberformatter" data-footer-formatter="priceFormatter">Çek Toplam</th>

                                <th data-field="BAKIYE" class="td-actions text-right" data-align="right" data-sortable="true" data-formatter="numberformatter">Genel Durum</th>


                            </tr>
                        </thead>
                        <tbody>
                        </tbody>

                    </table>
                </div>
            </div>
            <div class="modal-footer">

                <button type="button" class="btn btn-outline-dark" data-dismiss="modal">İptal</button>
                <button type="button" class="btn btn-primary" onclick="butonbankagetir()" data-dismiss="modal">Seç</button>
            </div>
        </div>
    </div>
</div>

@section script{

    <script type="text/javascript">
        $('.select2').select2()


        //Initialize Select2 Elements
        $('.select2bs4').select2({
            theme: 'bootstrap4',
            placeholder: "Cari adı veya kodu ile ara",
            ajax: {
                url: '/CARI_BASLIK/getcarid',
                processResults: function (data) {
                    // Transforms the top-level key of the response object from 'items' to 'results'
                    return {
                        results: data

                    };
                }
                // Additional AJAX parameters go here; see the end of this chapter for the full code of this example
            }
        });

            function carikurgetir() {
                cariayrintigetir();
            $.ajax({
                type: "POST",

                dataType: "json",
                contentType: "application/json; charset=utf-8",
                url: "/CARI_BASLIK/getparabirimi/",
                data: JSON.stringify({
                    kod: document.getElementById("CariKodu").options[document.getElementById("CariKodu").selectedIndex].value
                }),
                success: function (result) {
                    if (result != "TRY") {
                        var sel = document.getElementById("ParaBirimi");

                        var opts = sel.options;

                        kurgetir();

                    } else {
                        var sel = document.getElementById("ParaBirimi");

                        var opts = sel.options;

                        kurgetir();
                    }

                }
                ,
                error: function (result) {
                    toastr["error"]('error');
                }
            });
        }
                  var baslık = "@ViewBag.baslık";
         var parakuru;
         var ceksayisi =@Model.Ceksayisi;
                    var firmaceksayisi =@Model.FirmaCeksayisi;

            var firmasenetsayisi =@Model.FirmaSenetsayisi
            var senetsayisi =@Model.Senetsayisi;
        var visasayisi =@Model.VisaSayisi;

        var satir = null;
            var cekler = [];
                var senetler = [];
                var silincekler = [];
                var silinsenetler = [];
        var bakiyefiltre = null;
      var carid=@Model.fis.CariID;
        var caridg;
                var carikodu;
                var cariadı;
                var cariadresi;
                var caritelefon;
        var kasaid;
        var kasadg;
        var kasakodu;
        var $table = $('#bootstrap-table');
        var $caritable = $('#caritablo');
        var $banka = $('#bankatable');
        var $kasatable = $('#kasatablo');
        var $cek = $('#cektablosu');
        var $senet = $('#senettablosu');
        $(document).ready(function () {
            yenile();

                @if (Model.print)
               {
                   @:printDiv('printableArea');
               }
        });
            function cariayrintigetir() {
                if (carid == 0 || carid == null) {
                    carid = document.getElementById("CariKodu").options[document.getElementById("CariKodu").selectedIndex].value;
                }
                $.ajax({
                    type: "POST",


                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    url: "/CARI_BASLIK/getcariinfo/",

                    data: JSON.stringify({
                        kod: carid


                    }),
                    success: function (result) {
                        cariadı = result.cari.FIRMAUNVANI;
                        carikodu = result.cari.CARIKOD;
                        cariadresi = result.cari.ISADRES1;
                        caritelefon = result.cari.ISTEL;
                        firmalogo = result.firma.FirmaResimUrl;
                        firmaadres = result.firma.ADRESI1;
                        firmagsm = result.firma.YONETICI_TEL;
                        firmatel = result.firma.TEL;
                        firmafax = result.firma.FAX;
                        document.getElementById("FirmaSenetAderes").value = firmaadres;
                        document.getElementById("FirmaSenetSehir").value = result.firma.SEHIR;
                        document.getElementById("FirmaSenetVergiNO").value = result.firma.VERGINO;
                        document.getElementById("FirmaSenetVergiDairesi").value = result.firma.VERGIDAIRESI;
                        document.getElementById("SenetKesıdeEden").value = result.cari.FIRMAUNVANI;
                        document.getElementById("SenetAderes").value = result.cari.ISADRES1;
                        document.getElementById("SenetSehir").value = result.cari.ISIL;
                        document.getElementById("SenetVergiNO").value = result.cari.VERGINUMARASI;
                        document.getElementById("SenetVergiDairesi").value = result.cari.VERGIDAIRESI;
                    },
                    error: function (result) {
                        toastr["error"]('error');
                    }
                });

            }

        function printDiv(divName) {

            
            $.ajax({
                type: "POST",


                dataType: "json",
                contentType: "application/json; charset=utf-8",
                url: "/CARI_BASLIK/getcariinfo/",

                data: JSON.stringify({
                      @if (Model.fis.ID == 0){


@:   kod: document.getElementById("CariKodu").options[document.getElementById("CariKodu").selectedIndex].value,


        }
    else
    {
@: kod: document.getElementById("CariKodu").dataset.hiddenvalue,
    }

                }),
                success: function (result) {
                    cariadı = result.cari.FIRMAUNVANI;
                    carikodu = result.cari.CARIKOD;
                    cariadresi = result.cari.ISADRES1;
                    caritelefon = result.cari.ISTEL;
                    firmalogo = result.firma.FirmaResimUrl;
                    firmaadres = result.firma.ADRESI1;
                    firmagsm = result.firma.YONETICI_TEL;
                    firmatel = result.firma.TEL;
                    firmafax = result.firma.FAX;
                    var printContents = document.getElementById("yazdirilcak").innerHTML;
                    var originalContents = document.body.innerHTML;
                    var content = "";

                    var FISNO = document.getElementById("FisNo").value;
                    var TARIH = document.getElementById("Tarih").value;
                    var NOT = document.getElementById("Not").value;
                    var toplamtutar = document.getElementById("toplam").value;
                    content += `
           <style>
.vl {
  border-left: 4px solid red;
  height: 130px;
}
</style>
    <div class=" container-fluid">



      <div class="row d-flex justify-content-between align-items-end">

        <div class="col" style="max-width: 50%;">
         <img src="${firmalogo}">



        </div>

      <div class="col" style="max-width: 1%;">
       <div class="vl"></div>
    </div>
      <div class="col" style=" text-align:left">
    <div class="row">   <a>
     ${firmaadres}
    </a> </div>
   <div class="row">  <h5>Gsm:</h5>${firmagsm}</div>
       <div class="row">
     <h5>Tel:</h5> ${firmatel}     </div>
       <div class="row">
     <h5>Fax:</h5>${firmafax}</div>
       <div class="row"></div>

    </div>
    <div class="col">

        <h1 style="color:red"><strong>${baslık}</strong></h1>
    </div>
      </div>

      <hr>

      <div class="row">
        <div class="col-8">
          <table>
            <tbody>
            <tr>
              <td><h2>Cari:</h2> </td>
              <td></td>
              <td><h2 style="color:red">${carikodu + "/" + cariadı}</h2></td>
            </tr>

          </table>
        </div>
        <div class="col-4">
      <table>
            <tbody>
            <tr>
              <td><h3>No:</h3> </td>

              <td><h3 style="color:red">${FISNO}</h3></td>
            </tr>
      <tr>
              <td><h3>Tarih:</h3> </td>

              <td><h3 style="color:red">${TARIH}</h3></td>
            </tr>
          </table>
        </div>
      </div>
`;




                    content += printContents;
                    content += ` <div class="table-responsive">
                <table class="table table-striped table-sm" >

                    <tfoot>
                        <tr style="border-top: solid;">
                            <td></td>
                            <td></td>
                            <td></td>
                            <th class="text-right" scope="row" >Toplam:</th>
                            <th class="text-right" scope="row" >${toplamtutar}</th>
                            <th colspan="2" ></th>
                        </tr>


                    </tfoot>
                    <caption></caption>
        </table >
       </div>
    </div>
   `;
                    document.body.innerHTML = content;
                    window.print();

                    document.body.innerHTML = originalContents;
                    historysend("/CARI_HAREKET/CARIFISLISTE");

                },
                error: function (result) {
                    toastr["error"]('error');
                }
            });

        }
        function get_query_paramscek(p) {



            var arr = [{ verismi: "TARIH", deger: "01/01/2000", deger2: "01/01/2090", filtretipi: 4 }];
            arr.push({ verismi: "hareket.CEKDURUMU", deger: "0", deger2: "01/01/2090", filtretipi: 2 });
            arr.push({});

            if (p.sort != null) {
                return {

                    extraParam: 'abc',
                    search: p.search,
                    sort: p.sort,
                    order: p.order,
                    limit: p.limit,
                    offset: p.offset,

                    sort: p.sort,

                    filterler: arr
                }
            } else {
                return {
                    extraParam: 'abc',
                    search: p.search,
                    sort: p.sort,
                    order: p.order,
                    limit: p.limit,
                    offset: p.offset,

                    sort: "ID",

                    filterler: arr
                }

            }
        }

        function get_query_paramssenet(p) {



            var arr = [{ verismi: "TARIH", deger: "01/01/2000", deger2: "01/01/2090", filtretipi: 4 }];
            arr.push({ verismi: "hareket.SENETDURUMU", deger: "0", deger2: "01/01/2090", filtretipi: 2 });
            arr.push({});

            if (p.sort != null) {
                return {

                    extraParam: 'abc',
                    search: p.search,
                    sort: p.sort,
                    order: p.order,
                    limit: p.limit,
                    offset: p.offset,

                    sort: p.sort,

                    filterler: arr
                }
            } else {
                return {
                    extraParam: 'abc',
                    search: p.search,
                    sort: p.sort,
                    order: p.order,
                    limit: p.limit,
                    offset: p.offset,

                    sort: "ID",

                    filterler: arr
                }

            }
        }
            function get_query_params(p) {



                var arr = [{ verismi: "TARIH", deger: "01/01/2000", deger2: "01/01/2090", filtretipi: 4 }];


                if (p.sort != null) {
                    return {

                        extraParam: 'abc',
                        search: p.search,
                        sort: p.sort,
                        order: p.order,
                        limit: p.limit,
                        offset: p.offset,

                        sort: p.sort,

                        filterler: arr
                    }
                } else {
                    return {
                        extraParam: 'abc',
                        search: p.search,
                        sort: p.sort,
                        order: p.order,
                        limit: p.limit,
                        offset: p.offset,

                        sort: "ID",

                        filterler: arr
                    }

                }
            }
        function butoncekgetir(row) {

            row = satir;
            var check = false;
            senetler.forEach((element) => {
                if (element.PORTFOYNO == row.PORTFOYNO) {
                    check = true;
                    toastr["error"]("Seçtiğiniz Senet Zaten Kalemde Ekli!");
                }
            });
            if (check == false) {
                document.getElementById("Adı").value = row.PORTFOYNO;
                document.getElementById("NetTutar").value = row.TUTAR;
                document.getElementById("Tutar").value = row.TUTAR;
                document.getElementById("Açıklama").value = row.ACIKLAMA;
                document.getElementById("Vade").value = row.VADE;
                $('#ModalPORTFOYDAKICEKLER').modal('hide');
                setTimeout(function () { $('#Açıklama').focus() }, 800);
                cekler.push({ PORTFOYNO: portfyno, BANKADI: "", BANKASUBE: "", BANKAHESAPNO: "", ÇEKNO: "", KASIDEDEN: "", KASIDEYERI: "", KASIDETARIHI: "", VERGINO: "" });
            }
        }
        function butonsenetgetir(row) {

            row = satir;
            var check = false;
            senetler.forEach((element) => {
                if (element.PORTFOYNO == row.PORTFOYNO) {
                    check = true;
                    toastr["error"]("Seçtiğiniz Senet Zaten Kalemde Ekli!");
                }
            });
            if (check == false) {
                senetler.push({ PORTFOYNO: portfyno, BANKADI: "", BANKASUBE: "", BANKAHESAPNO: "", ÇEKNO: "", KASIDEDEN: "", KASIDEYERI: "", KASIDETARIHI: "", VERGINO: "" });
                document.getElementById("Adı").value = row.PORTFOYNO;
                document.getElementById("NetTutar").value = row.TUTAR;
                document.getElementById("Tutar").value = row.TUTAR;
                document.getElementById("Açıklama").value = row.ACIKLAMA;
                document.getElementById("Vade").value = row.VADE;
                $('#ModalPORTFOYDAKISENETLER').modal('hide');
                setTimeout(function () { $('#Açıklama').focus() }, 800);
            }
        }
           function ceksenetayarla() {


               butonkasalistele();
               $('#ModalKasaSec').modal('show');

            }
            function ceksenetgetir() {
                  var hareket = document.getElementById("Hareket").options[document.getElementById("Hareket").selectedIndex].value;
              @if (Model.fis.TIP==1)
    {
               @: if (hareket == 1) {
                    @:  document.getElementById("Portfoyno").value = "AÇek" + (ceksayisi + 1).toString(); $("#ModalCEKGIRIS").modal('show'); }





                 @:  if (hareket == 2) {
                    @: document.getElementById("SenetPortfoyno").value = "ASenet"+(senetsayisi + 1); $("#ModalSENETGIRIS").modal('show');}
@:  if (hareket == 5) {
                    @:  $("#ModalBanka").modal('show'); visasayisi += 1;}
              }
              else
              {
                     @: if (hareket == 1) {
                    @: document.getElementById("FirmaPortfoyno").value = "FÇek"+(firmaceksayisi + 1); $("#ModalPORTFOYDAKICEKLER").modal('show'); }

                 @:  if (hareket == 2) {
                    @: document.getElementById("FirmaSenetPortfoyno").value = "FSenet" +(firmasenetsayisi + 1); $("#ModalPORTFOYDAKISENETLER").modal('show'); }
              @:  if (hareket == 5) {
                    @:  $("#ModalBanka").modal('show'); visasayisi += 1;}
              }

            }

        function butonsenetekle() {
            document.getElementById("Adı").value = document.getElementById("SenetPortfoyno").value;
            document.getElementById("Açıklama").value = document.getElementById("SenetKesıdeEden").value + "/" + document.getElementById("SenetSehir").value + "/" + document.getElementById("SenetPortfoyno").value;
            senetler.push({ PORTFOYNO: document.getElementById("SenetPortfoyno").value, KESIDEEDEN: document.getElementById("SenetKesıdeEden").value, KESIDETARIHI: document.getElementById("SenetKesıdeTarihi").value, ADRES: document.getElementById("SenetAderes").value, SEHIR: document.getElementById("SenetSehir").value, VERGİNO: document.getElementById("SenetVergiNO").value, VERGIDAIRESI: document.getElementById("SenetVergiDairesi").value });

            senetsayisi += 1;
        }
        function butoncekekle() {
            document.getElementById("Adı").value = document.getElementById("Portfoyno").value;
            document.getElementById("Açıklama").value = document.getElementById("KaşideEden").value + "/" + document.getElementById("BankaAdı").value + "/" + document.getElementById("ÇekNo").value;
            cekler.push({ PORTFOYNO: document.getElementById("Portfoyno").value, BANKADI: document.getElementById("BankaAdı").value, BANKASUBE: document.getElementById("BankaSube").value, BANKAHESAPNO: document.getElementById("BankaNo").value, ÇEKNO: document.getElementById("ÇekNo").value, KASIDEDEN: document.getElementById("KaşideEden").value, KASIDEYERI: document.getElementById("KaşideYeri").value, KASIDETARIHI: document.getElementById("KaşideTarihi").value, VERGINO: document.getElementById("VergiNo").value });
            ceksayisi += 1;

        }
        function butonfirmasenetekle() {
            document.getElementById("Adı").value = document.getElementById("FirmaSenetPortfoyno").value;

            senetler.push({ PORTFOYNO: document.getElementById("FirmaSenetPortfoyno").value, KESIDEEDEN: "", KESIDETARIHI: "", ADRES: document.getElementById("FirmaSenetAderes").value, SEHIR: document.getElementById("FirmaSenetSehir").value, VERGİNO: document.getElementById("FirmaSenetVergiNO").value, VERGIDAIRESI: document.getElementById("FirmaSenetVergiDairesi").value });

            senetsayisi += 1;
        }
        function butonfirmacekekle() {
            document.getElementById("Adı").value = document.getElementById("FirmaPortfoyno").value;
            document.getElementById("Açıklama").value = document.getElementById("FirmaBankaAdı").value + "/" + document.getElementById("FirmaÇekNo").value;
            cekler.push({ PORTFOYNO: document.getElementById("FirmaPortfoyno").value, BANKADI: document.getElementById("FirmaBankaAdı").value, BANKASUBE: document.getElementById("FirmaBankaSube").value, BANKAHESAPNO: document.getElementById("FirmaBankaNo").value, ÇEKNO: document.getElementById("FirmaÇekNo").value, KASIDEDEN: "", KASIDEYERI: "", KASIDETARIHI: document.getElementById("KaşideTarihi").value, VERGINO: "" });

            ceksayisi += 1;

        }
        function butonkasalistele() {
            var tur = 0;
            if (document.getElementById("Hareket").options[document.getElementById("Hareket").selectedIndex].value != 0) {
              @if (Model.fis.TIP != 1)
    {
                @:tur = null;

                }
            }
        $.ajax({
            type: "POST",

            dataType: "json",
            contentType: "application/json; charset=utf-8",
            url: "/CARI_HAREKET/kasagetir/",
            data: JSON.stringify({
                kasatipi: document.getElementById("Hareket").options[document.getElementById("Hareket").selectedIndex].text,
                tur: tur
            }),
            success: function (result) {

                $kasatable.bootstrapTable('load', result);
            },
            error: function (result) {
                toastr["error"]('error');
            }
        });


    }
        function kurgetir() {
            var e = document.getElementById("ParaBirimi");
            document.getElementById("ParaBirimiKuru").value =e.options[e.selectedIndex].value;
            document.getElementById("NetTutar").value = parseFloat(document.getElementById("Tutar").value) *parseFloat(document.getElementById("ParaBirimiKuru").value);
        }
        function tutargetir() {

            document.getElementById("NetTutar").value = parseFloat(document.getElementById("Tutar").value.replaceAll(",", "")) * parseFloat(document.getElementById("ParaBirimiKuru").value.replaceAll(",", ""));
        }
        function tutargetirrowparabirimi(rowid) {

            rowid.parentNode.parentNode.getElementsByClassName("countable")[0].firstElementChild.value = numberformatter(parseFloat(rowid.parentNode.parentNode.getElementsByClassName("fiyat")[0].firstElementChild.value.replaceAll(",", "")) * parseFloat(rowid.value.replaceAll(",", "")));
            yenile();
        }
        function tutargetirrowtutar(rowid) {

            rowid.parentNode.parentNode.getElementsByClassName("countable")[0].firstElementChild.value = numberformatter(parseFloat(rowid.parentNode.parentNode.getElementsByClassName("parabirimi")[0].firstElementChild.value.replaceAll(",", "")) * parseFloat(rowid.value.replaceAll(",", "")));
            rowid.value = numberformatter(rowid.value.replaceAll(",", ""));
            yenile();
        }
        function butoncarigetir() {

            carid = caridg;
            document.getElementById("CariKodu").value = carikodu;
            document.getElementById("ModalCariSec").style.display = "none";
            var sel = document.getElementById("ParaBirimi");
              var opts = sel.options;
            for (var opt, j = 0; opt = opts[j]; j++) {
                if (opt.text == parakuru) {
      sel.selectedIndex = j;
      break;
                }

            }
                kurgetir();

        }
        function butonbankagetir(row) {
            row = satir;

            kasaidg = row.ID;
            document.getElementById("Adı").value = row.BANKAKODU;
            document.getElementById("Açıklama").value = visasayisi + "nolu Visa";
            $('#ModalBanka').modal('hide');



            ceksenetgetir();
        } function get_query_paramsbanka(p) {



            var arr = [{ verismi: "BAKIYE", deger: 0, deger2: 0, filtretipi: 3 }]
            if (p.sort != null) {
                return {

                    extraParam: 'abc',
                    search: p.search,
                    sort: p.sort,
                    order: p.order,
                    limit: p.limit,
                    offset: p.offset,

                    sort: p.sort,

                    filterler: arr
                }
            } else {
                return {
                    extraParam: 'abc',
                    search: p.search,
                    sort: p.sort,
                    order: p.order,
                    limit: p.limit,
                    offset: p.offset,

                    sort: "ID",

                    filterler: arr
                }

            }
        }
        function butonkasagetir() {

            kasaid = kasadg;
            document.getElementById("Kasa").value = kasakodu;
            document.getElementById("ModalKasaSec").style.display = "none";
            document.getElementById("Açıklama").focus();
            ceksenetgetir();
        }
        function addRow(tableID) {

            var table = document.getElementById(tableID);

            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var cell1 = row.insertCell(0);
            var element1 = document.createElement("input");
            element1.type = "text";
            element1.name = "txtbox[]";
            cell1.appendChild(element1);

            var cell2 = row.insertCell(1);
            var element2 = document.createElement("input");
            element2.type = "text";
            element2.name = "txtbox[]";
            cell2.appendChild(element2);

            var cell3 = row.insertCell(2);
            var element3 = document.createElement("input");
            element3.type = "text";
            element3.name = "txtbox[]";
            cell3.appendChild(element3);
            var cell4 = row.insertCell(3);
            var element4 = document.createElement("input");
            element4.type = "text";
            element4.name = "txtbox[]";
            cell4.appendChild(element4);

            var cell5 = row.insertCell(4);
            var element5 = document.createElement("input");
            element5.type = "text";
            element5.name = "txtbox[]";
            cell5.appendChild(element5);

            var cell6 = row.insertCell(5);
            var element6 = document.createElement("input");
            element6.type = "text";
            element6.name = "txtbox[]";
            cell6.appendChild(element6);
            var cell7 = row.insertCell(6);
            var element7 = document.createElement("input");
            element7.type = "text";
            element7.name = "txtbox[]";
            cell7.appendChild(element7);

        }

        $().ready(function () {
            $cek.bootstrapTable({

                type: "POST",
                url: "/CEK/ALINANFISDATA",
                method: 'post',
                contentType: 'application/x-www-form-urlencoded',
                queryParams: get_query_paramscek,

                clickToSelect: true,
                showRefresh: true,

                search: true,
                showToggle: true,
                showColumns: true,
                locale: 'tr-TR',
                searchAlign: 'left',
                formatShowingRows: function (pageFrom, pageTo, totalRows) {
                    return "Toplam " + totalRows+" Kayıt";
                },
                formatRecordsPerPage: function (pageNumber) {
                    return pageNumber + " Adet Listeleniyor";
                }

            });
            $cek.on('click-row.bs.table', function (e, row, $element) {
                satir = row;
                portfyno = row.PORTFOYNO;

            });
            $cek.on('check.bs.table', function (e, row, $element) {
                satir = row;
                portfyno = row.PORTFOYNO;

            });
            $cek.on('  dbl-click-row.bs.table', function (e, row, $element) {
                var check = false;
                cekler.forEach((element) => {
                    if (element.PORTFOYNO == row.PORTFOYNO) {
                        check = true;
                        toastr["error"]("Seçtiğiniz Çek Zaten Kalemde Ekli!");
                    }
                });
                if (check == false) {
                    portfyno = row.PORTFOYNO;
                    cekler.push({ PORTFOYNO: portfyno, BANKADI: "", BANKASUBE: "", BANKAHESAPNO: "", ÇEKNO: "", KASIDEDEN: "", KASIDEYERI: "", KASIDETARIHI: "", VERGINO: "" });
                    document.getElementById("Adı").value = row.PORTFOYNO;
                    document.getElementById("NetTutar").value = row.TUTAR;
                    document.getElementById("Tutar").value = row.TUTAR;
                    document.getElementById("Açıklama").value = row.ACIKLAMA;
                    document.getElementById("Vade").value = row.VADE;

                    $('#ModalPORTFOYDAKICEKLER').modal('hide');
                    setTimeout(function () { $('#Açıklama').focus() }, 800);
                }

            });
            $senet.bootstrapTable({

                type: "POST",
                url: "/SENET/ALINANFISDATA",
                method: 'post',
                contentType: 'application/x-www-form-urlencoded',
                queryParams: get_query_paramssenet,

                clickToSelect: true,
                showRefresh: true,

                search: true,
                showToggle: true,
                showColumns: true,
                locale: 'tr-TR',
                searchAlign: 'left',
                formatShowingRows: function (pageFrom, pageTo, totalRows) {
                    return "Toplam " + totalRows+" Kayıt";
                },
                formatRecordsPerPage: function (pageNumber) {
                    return pageNumber + " Adet Listeleniyor";
                }

            });
            $senet.on('click-row.bs.table', function (e, row, $element) {
                satir = row;
                portfyno = row.PORTFOYNO;

            });
            $senet.on('check.bs.table', function (e, row, $element) {
                satir = row;
                portfyno = row.PORTFOYNO;

            });
            $senet.on('  dbl-click-row.bs.table', function (e, row, $element) {
                var check = false;
                senetler.forEach((element) => {
                    if (element.PORTFOYNO == row.PORTFOYNO) {
                        check = true;
                        toastr["error"]("Seçtiğiniz Senet Zaten Kalemde Ekli!");
                    }
                });
                if (check == false) {
                    portfyno = row.PORTFOYNO;
                    senetler.push({ PORTFOYNO: portfyno, BANKADI: "", BANKASUBE: "", BANKAHESAPNO: "", ÇEKNO: "", KASIDEDEN: "", KASIDEYERI: "", KASIDETARIHI: "", VERGINO: "" });
                    document.getElementById("Adı").value = row.PORTFOYNO;
                    document.getElementById("NetTutar").value = row.TUTAR;
                    document.getElementById("Tutar").value = row.TUTAR;
                    document.getElementById("Açıklama").value = row.ACIKLAMA;
                    document.getElementById("Vade").value = row.VADE;
                    $('#ModalPORTFOYDAKISENETLER').modal('hide');
                    setTimeout(function () { $('#Açıklama').focus() }, 800);
                }
            });


            //activate the tooltips after the data table is initialized
            $('[rel="tooltip"]').tooltip();

            $(window).resize(function () {
                $caritable.bootstrapTable('resetView');
            });



            $kasatable.bootstrapTable({


                clickToSelect: true,


                search: true,


                pagination: true,
                searchAlign: 'left',
                pageSize: 8,

                pageList: [8, 10, 25, 50, 100],
                locale: 'tr-TR',
                formatShowingRows: function (pageFrom, pageTo, totalRows) {
                    return "Toplam " + totalRows+" Kayıt";
                },
                formatRecordsPerPage: function (pageNumber) {
                    return pageNumber + " Adet Listeleniyor";
                },

            });
            $kasatable.on('check.bs.table', function (e, row, $element) {
                kasaidg = row.ID;
                kasakodu = row.KASAADI;

            });
            $kasatable.on('click-row.bs.table', function (e, row, $element) {
                kasaidg = row.ID;
                kasakodu = row.KASAADI;

            });
            $kasatable.on('  dbl-click-row.bs.table', function (e, row, $element) {
                kasaidg = row.ID;



                document.getElementById("Kasa").value = row.KASAADI;
                $('#ModalKasaSec').modal('hide');
                ceksenetgetir();
                document.getElementById("Açıklama").focus();
            });

            //activate the tooltips after the data table is initialized
            $('[rel="tooltip"]').tooltip();

            $(window).resize(function () {
                $kasatable.bootstrapTable('resetView');
            });
                   $banka.bootstrapTable({
  type: "POST",
                    url: "/BANKAS/GetData",
                    method: 'post',
                    contentType: 'application/x-www-form-urlencoded',
                    queryParams: get_query_paramsbanka,
         printPageBuilder: function (table) {
        return `
<html>
  <head>
  <style type="text/css" media="print">
  page {
    size: auto;
    margin: 25px 0 25px 0;
  }
  </style>
  <style type="text/css" media="all">
  table {
    border-collapse: collapse;
    font-size: 12px;
  }
  table, th, td {
    border: 1px solid grey;
  }
  th, td {
    text-align: center;
    vertical-align: middle;
  }
  p {
    font-weight: bold;
    margin-left:20px;
  }
  table {
    width:94%;
    margin-left:3%;
    margin-right:3%;
  }
  div.bs-table-print {
    text-align:center;
  }
    h1.bs-table-print {
    text-align:center;
  }
  </style>
    <title>@Session["FirmaAdı"]</title>
     </head>
  <body>

     <h1 class="bs-table-print">Banka Listesi</h1>

  <div class="bs-table-print">${table}</div>
  </body>
</html>`
      },
                    clickToSelect: true,
                    showRefresh: true,

                    search: true,
                    showToggle: true,
                    showColumns: true,

                    searchAlign: 'left',

                    locale: 'tr-TR',
                    formatShowingRows: function (pageFrom, pageTo, totalRows) {
                        return "Toplam " + totalRows+" Kayıt";
                    },
                    formatRecordsPerPage: function (pageNumber) {
                        return pageNumber + " Adet Listeleniyor";
                    },

            });
            $banka.on('check.bs.table', function (e, row, $element) {
                kasaidg = row.ID;
                document.getElementById("Adı").value = row.BANKAKODU;
                $('#ModalBanka').modal('hide');
                document.getElementById("Açıklama").value = visasayisi + "nolu Visa";


                ceksenetgetir();

            });
            $banka.on('click-row.bs.table', function (e, row, $element) {

                kasaidg = row.ID;
                document.getElementById("Adı").value = row.BANKAKODU;
                $('#ModalBanka').modal('hide');
                document.getElementById("Açıklama").value = visasayisi + "nolu Visa";


                ceksenetgetir();
            });
            $banka.on('  dbl-click-row.bs.table', function (e, row, $element) {
                kasaidg = row.ID;
                document.getElementById("Adı").value = row.BANKAKODU;
                $('#ModalBanka').modal('hide');
                document.getElementById("Açıklama").value = visasayisi + "nolu Visa";


                ceksenetgetir();
            });

        })
        function butonlistele() {



            setTimeout(function () { $('#Hareket').focus() }, 800);
            if (parseFloat(document.getElementById('NetTutar').value) == 0) {
                toastr["error"]("Lütfen Tutar Giriniz!");
            } else {
                if (document.getElementById('Hareket').options[document.getElementById('Hareket').selectedIndex].value == 2 || document.getElementById('Hareket').options[document.getElementById('Hareket').selectedIndex].value == 1) {
                    if (document.getElementById('Adı').value == "") {
                        toastr["error"]("Lütfen Çek Senet Giriniz!");
                    } else {
                        $table.append('<tr data-index="0"><td class="hareket" style="width: 85px;"><input class="form-control form-control-sm"value="' + document.getElementById('Hareket').options[document.getElementById('Hareket').selectedIndex].text + '"  readonly> </td><td style="width: 100px;">   <input type="text" readonly="" class="form-control form-control-sm" value="' + document.getElementById('Kasa').value + '"></td><td style="width: 76px;"><input type="text" class="form-control form-control-sm"  readonly="" value="' + document.getElementById('Adı').value + '"></td><td style="width: 220px"><input type="text" class="form-control form-control-sm" value="' + document.getElementById('Açıklama').value + '"></td><td><input type="date" class="form-control form-control-sm"  value="' + document.getElementById('Vade').value + '"></td><td style="width: 115px; class="fiyat"><input type="text" class="form-control form-control-sm text-right" onchange="tutargetirrowtutar(this)"  value="' + document.getElementById('Tutar').value + '" required=""></td><td style="width: 76px;"><input class="form-control form-control-sm" value="' + document.getElementById('ParaBirimi').options[document.getElementById('ParaBirimi').selectedIndex].text + '" readonly></td><td style="width: 72px;"class="parabirimi"> <input type="text" class="form-control form-control-sm text-right" onchange="tutargetirrowparabirimi(this)" value="' + document.getElementById('ParaBirimiKuru').value + '"  required=""></td><td class="countable" style="width: 115px;"><input type="text" readonly="" value="' + numberformatter(document.getElementById('NetTutar').value) + '" class="form-control form-control-sm text-right" aria-describedby="net-tutar"></td><td class="no-print"> <button  type="button" id="deleteRowBtn" onclick="deleteRow(this)" class="btn btn-danger btn-sm btn-rounded noprint">  <span class="icon text-white-50">    <i class="fas fa-trash-alt"></i> </span></button></td></tr>');
                        document.getElementById('Adı').value = "";

                        document.getElementById('Açıklama').value = "";
                        document.getElementById('Tutar').value = "";
                        document.getElementById('NetTutar').value = "";
                        yenile();


                    }
                } else {
                    $table.append('<tr data-index="0"><td class="hareket" style="width: 85px;"><input class="form-control form-control-sm"value="' + document.getElementById('Hareket').options[document.getElementById('Hareket').selectedIndex].text + '"  readonly> </td><td style="width: 100px;">   <input type="text" readonly="" class="form-control form-control-sm" value="' + document.getElementById('Kasa').value + '"></td><td style="width: 76px;"><input type="text" class="form-control form-control-sm"  readonly="" value="' + document.getElementById('Adı').value + '"></td><td style="width: 220px"><input type="text" class="form-control form-control-sm" value="' + document.getElementById('Açıklama').value + '"></td><td><input type="date" class="form-control form-control-sm"  value="' + document.getElementById('Vade').value + '"></td><td style="width: 115px;" class="fiyat"><input type="text" class="form-control form-control-sm text-right" onchange="tutargetirrowtutar(this)"  value="' + document.getElementById('Tutar').value + '" required=""></td><td style="width: 76px;"><input class="form-control form-control-sm" value="' + document.getElementById('ParaBirimi').options[document.getElementById('ParaBirimi').selectedIndex].text + '" readonly></td><td style="width: 72px;"class="parabirimi"> <input type="text" class="form-control form-control-sm text-right" onchange="tutargetirrowparabirimi(this)" value="' + document.getElementById('ParaBirimiKuru').value + '"  required=""></td><td class="countable" style="width: 115px;"><input type="text" readonly="" value="' + numberformatter(document.getElementById('NetTutar').value) + '" class="form-control form-control-sm text-right" aria-describedby="net-tutar"></td><td class="no-print"> <button  type="button" id="deleteRowBtn" onclick="deleteRow(this)" class="btn btn-danger btn-sm btn-rounded noprint">  <span class="icon text-white-50">    <i class="fas fa-trash-alt"></i> </span></button></td></tr>');
                    document.getElementById('Adı').value = "";

                    document.getElementById('Açıklama').value = "";
                    document.getElementById('Tutar').value = "";
                    document.getElementById('NetTutar').value = "";
                    yenile();


                }


            }







        }
                function yenile() {maskla();
                    var sum = 0;
                    var nakit = 0;
                    var senet = 0;
                    var cek = 0;
                    var table = document.getElementById("bootstrap-table");
                    var ths = table.getElementsByTagName('th');
                    var tds = table.getElementsByClassName('countable');
                    var hareketler = table.getElementsByClassName('hareket');

                    for (var i = 0; i < tds.length; i++) {

                        var text = tds[i].firstElementChild.value.toString().replaceAll(/,/g, '');
                        var texta = hareketler[i].childNodes[0].value.toString();
                        if (texta == "Nakit") {
                            nakit += isNaN(text) ? 0 : parseFloat(text);
                        }
                        if (texta == "Senet") {
                            senet += isNaN(text) ? 0 : parseFloat(text);
                        }
                        if (texta == "Çek") {
                            cek += isNaN(text) ? 0 : parseFloat(text);
                        }
                        sum += isNaN(text) ? 0 : parseFloat(text);

                    }

                    document.getElementById("nakitoplam").innerHTML = numberformatter(nakit);
                    document.getElementById("senetoplam").innerHTML = numberformatter(senet);
                    document.getElementById("cektoplam").innerHTML = numberformatter(cek);
                    document.getElementById("toplam").value = numberformatter(sum);


                }
                function deleteRowsenet(btn) {
                    var row = btn.parentNode.parentNode;
                    var c = row.children;
                    if (row.firstChild.innerHTML == "Senet") {

                        silinsenetler.push(c[2].innerHTML);



                    }

                    row.parentNode.removeChild(row);
                    yenile();
                }
                function deleteRowcek(btn) {
                    var row = btn.parentNode.parentNode;
                    var c = row.children;
                    if (row.firstElementChild.innerHTML == "Çek") {


                        silincekler.push(c[2].innerHTML);



                    }


                    row.parentNode.removeChild(row);
                    yenile();
                }
            function deleteRow(btn) {
                var row = btn.parentNode.parentNode;

                if (row.firstElementChild.innerHTML == "Çek") {


                        cekler.splice(row.index, 1);
                    ceksayisi -= 1;

                }
                if (row.firstElementChild.innerHTML == "Senet") {


                    senetler.splice(row.index, 1);
                    senetsayisi -= 1;

                }
                row.parentNode.removeChild(row);
                yenile();
}

        function butongonder(yazdir, buton) {


            var arr = [];


            var oTable = document.getElementById('bootstrap-table');

            //gets rows of table
            var rowLength = oTable.rows.length;

            //loops through rows
            for (i = 2; i < rowLength; i++) {

                //gets cells of current row
                var oCells = oTable.rows.item(i).cells;

                //gets amount of cells of current row
                var cellLength = oCells.length;

                //loops through each cell in current row
                for (var j = 0; j < cellLength; j++) {

                    // get your cell info here

                    var cellVal = oCells.item(j).innerHTML;
                    var cellVal = oCells.item(j).innerHTML;
                    var Hareket;
                    var Kasa;
                    var Portfoyno;
                    var Acıklama;
                    var Vade;
                    var Tutar;
                    var Parabirimi;
                    var Parabirimi;
                    var Parakuru;
                    var NetTutar;
                     if (j == 0)
                        Hareket = oCells.item(j).firstElementChild.value;
                    if (j == 1)
                        Kasa = oCells.item(j).firstElementChild.value;
                    if (j == 2)
                        Portfoyno = oCells.item(j).firstElementChild.value;
                    if (j == 3)
                        Acıklama = oCells.item(j).firstElementChild.value;
                    if (j == 4)
                        Vade = oCells.item(j).firstElementChild.value+'T'+'@DateTime.Now.Hour.ToString("D" + 2)'+':'+'@DateTime.Now.Second.ToString("D" + 2)';
                    if (j == 5)
                        Tutar = oCells.item(j).firstElementChild.value;
                    if (j == 6)
                        Parabirimi = oCells.item(j).firstElementChild.value;
                     if (j == 7)
                         Parakuru = oCells.item(j).firstElementChild.value;
                     if (j == 8)
                         NetTutar = oCells.item(j).firstElementChild.value;

                }
                arr.push({ HAREKET: Hareket, KASA: Kasa, PORTFOYNO: Portfoyno, VADE: Vade, ACIKLAMA: Acıklama, TUTAR: Tutar, PARABIRIMI: Parabirimi, PARAKURU: Parakuru, NETTutar: NetTutar });
            }

                    if (arr.length == 0) {
                        toastr["error"]('Lütfen Kalem Ekleyiniz!');
                    } else {
                        buton.disabled = true;

                        $.ajax({
                            type: "POST",


                            dataType: "json",
                            contentType: "application/json; charset=utf-8",
                            url: "/CARI_HAREKET/datagonder/",
                            data: JSON.stringify({
                                    @if (Model.fis.ID == 0){


@:   CARIKOD: document.getElementById("CariKodu").options[document.getElementById("CariKodu").selectedIndex].value,


        }
    else
    {
@: CARIKOD: document.getElementById("CariKodu").dataset.hiddenvalue,
    }

                                FISNO: document.getElementById("FisNo").value,
                                TARIH: document.getElementById("Tarih").value,
                                NOT: document.getElementById("Not").value,
                                SORUMLULUK_MERKEZI: document.getElementById("Smerkezi").value,
                                SILINCEKLER: silincekler,
                                SILINSENETLER: silinsenetler,
                                CEKLER: cekler,
                                SENETLER: senetler,
                                gelenhareket: arr,
                                TIPI: @{ if (Model.fis.TIP == 1)
                        {@: "Giriş" ,
                            }


                            if (Model.fis.TIP == 2)
                            {@: "Çıkış",
                            }



                }
                }),
                            success: function (result) {
                                if (yazdir == true) {
                                    printDiv('printableArea');
                                } else {
                                    historysend("/CARI_HAREKET/CARIFISLISTE");
                                }
                                if (result == "Başarılı") {
                                    toastr["success"]("Başarıyla Kayıt Edildi!");
                                } else {
                                    toastr["error"]('Lütfen Bilgileri Eksik  Ya da Yanlış Girmeyiniz');
                                }

                                buton.disabled = false;
                            },
                            error: function (result) {
                                toastr["error"]('Lütfen Bilgileri Eksik  Ya da Yanlış Girmeyiniz');
                                buton.disabled = false;
                            }
                        });
                    }
        }

        function idFormatter() {
            return 'Toplam'
        }

        function nameFormatter(data) {
            return data.length
        }

        function numberformatter(value, row, index) {
            if (!value)
                return "0.00";
            else {
                return [

                    numberWithCommas((Number(value.toString().replace(",", "."))).toFixed(2))
                ].join('');
            }
        }
        function numberWithCommas(x) {
            return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
        function priceFormatter(data) {
            var field = this.field

            var toplam = data.map(function (row) {
                if (row[field])
                    return +Number(row[field].toString().replace(",", "."))
                else {
                    return +Number("0")
                }
            }).reduce(function (sum, i) {
                return sum + i
            }, 0);
            return numberformatter(toplam) + " TL"
        }
        function footerStyle(column) {
            return {
                id: {
                    classes: 'uppercase'
                },
                name: {
                    css: { 'font-weight': 'normal' }
                },
                price: {
                    css: { color: 'red' }
                }
            }[column.field]
        }


    </script>
}

